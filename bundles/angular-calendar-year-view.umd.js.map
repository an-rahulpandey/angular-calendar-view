{"version":3,"file":"angular-calendar-year-view.umd.js","sources":["ng://angular-calendar-year-view/lib/angular-calendar-year-view.component.ts","ng://angular-calendar-year-view/lib/angular-calendar-year-view.module.ts"],"sourcesContent":["import { Component, OnInit, Input, Output, EventEmitter, HostBinding } from \"@angular/core\";\nimport * as cloneDeep from \"lodash/cloneDeep\";\nimport { DomSanitizer } from '@angular/platform-browser';\nconst clone: cloneDeep = (<any>cloneDeep).default || cloneDeep\n@Component({\n  selector: 'angular-calendar-year-view',\n  templateUrl: './angular-calendar-year-view.component.html',\n  styleUrls: ['./angular-calendar-year-view.component.scss']\n})\nexport class AngularCalendarYearViewComponent implements OnInit {\n  @HostBinding('style')\n  get style() {\n    return this.sanitizer.bypassSecurityTrustStyle(\n      `--themecolor: ${this.themecolor};`\n    );\n  }\n  @Input()\n  themecolor:any='#ff0000'\n  @Input()\n  events = [];\n\n  @Input()\n  viewDate: Date = new Date();\n\n  @Output()\n  eventClicked = new EventEmitter<any>();\n  \n  @Output()\n  actionClicked = new EventEmitter<any>();\n\n  loader: any = false;\n  days: any = [\"Su\", \"Mo\", \"Tu\", \"We\", \"Th\", \"Fr\", \"Sa\"];\n  dayindex: any;\n  daydetails: any = {};\n  year: any = new Date().getFullYear();\n  calendar: any = [];\n  spinner: any = true;\n  constructor(              public sanitizer:DomSanitizer,\n\n  ) { }\n  ngOnInit() {\n    this.initCalendar(this.viewDate);\n  }\n  ngOnChanges() {\n    this.initCalendar(this.viewDate);\n  }\n  initCalendar(date) {\n    this.year = date.getFullYear();\n    this.calendar = [];\n    this.spinner = true;\n    for (let index = 0; index < 12; index++) {\n      this.calendar.push({\n        date: new Date(this.year, index + 1, 0),\n        days: this.generateCalendar(index + 1, this.year)\n      });\n    }\n    let self = this;\n    setTimeout(() => {\n      self.spinner = false;\n    }, 2000);\n  }\n  generateCalendar(month, year) {\n    let monthList = [];\n    let nbweeks = this.getNbWeeks(month, year);\n    let dayone = new Date(year, month - 1, 1).getDay();\n    let nbdaysMonth = new Date(year, month, 0).getDate();\n    let lastdayindex = new Date(year, month - 1, nbdaysMonth).getDay();\n    let lastday = 7;\n    let day = 1;\n    let today = new Date().toDateString();\n\n    for (let indexweek = 0; indexweek < nbweeks; indexweek++) {\n      monthList[indexweek] = [];\n      if (nbweeks == indexweek + 1) {\n        lastday = lastdayindex + 1;\n      }\n      if (indexweek > 0) {\n        dayone = 0;\n      }\n      for (let indexday = dayone; indexday < lastday; indexday++) {\n        let d1 = new Date(year, month - 1, day).toDateString();\n        let istoday = d1 == today;\n        let colorsEvents = this.getnbevents(day, month - 1)\n        monthList[indexweek][indexday] = {\n          day: day,\n          istoday: istoday,\n          colors: colorsEvents.color,\n          events: [],\n          nb: colorsEvents.nb\n        };\n        day++;\n      }\n    }\n\n    return monthList;\n  }\n  getNbWeeks(month, year) {\n    let dayone = new Date(year, month - 1, 1).getDay();\n    let nbdaysMonth = new Date(year, month, 0).getDate();\n    let lastday = new Date(year, month - 1, nbdaysMonth).getDay();\n    return (nbdaysMonth + dayone + (6 - lastday)) / 7;\n  }\n  getTodayEvents(day, month) {\n    this.daydetails = {}\n\n    if (this.events.length > 0) {\n      this.loader = true;\n      this.daydetails = clone(day);\n      let d1 = new Date(this.year, month, day.day).toDateString();\n\n      for (let index = 0; index < this.events.length; index++) {\n        const element = this.events[index];\n        let d2 = element.start.toDateString();\n        if (d2 == d1) {\n          this.daydetails.events.push(element);\n        }\n        if (index == this.events.length - 1) {\n          let self = this;\n          setTimeout(() => {\n            self.loader = false;\n          }, 1000);\n        }\n\n      }\n    }\n  }\n  getnbevents(day, month) {\n    let nb = 0;\n    let colors = []\n    if (this.events.length > 0) {\n      let d1 = new Date(this.year, month, day).toDateString();\n      for (let index = 0; index < this.events.length; index++) {\n        const element = this.events[index];\n        let d2 = element.start.toDateString();\n        if (d2 == d1) {\n          nb++;\n          colors.push(element.color.secondary)\n        }\n      }\n      return ({ nb: nb, color: colors.toString() })\n    } else {\n      return { color: \"\", nb: 0 }\n    }\n  }\n  eventClickedFn(event) {\n    this.eventClicked.emit(event);\n  }\n  refresh(date) {\n    this.initCalendar(date);\n  }\n  actionClickedFn(action,event?){\n       this.actionClicked.emit({action:action,event:event})\n  }\n}\n","import { NgModule, ModuleWithProviders } from '@angular/core';\nimport { AngularCalendarYearViewComponent } from './angular-calendar-year-view.component';\nimport { PopoverModule } from 'ngx-bootstrap/popover'\nimport { CommonModule } from '@angular/common';\n\n\n@NgModule({\n  declarations: [\n    AngularCalendarYearViewComponent\n  ],\n  imports: [\n    CommonModule,\n    PopoverModule\n  ],\n  exports: [\n    AngularCalendarYearViewComponent\n  ]\n})\nexport class AngularCalendarYearViewModule { \n  public static forRoot(): ModuleWithProviders {\n    return {\n      ngModule: AngularCalendarYearViewModule,\n      providers: [\n        PopoverModule.forRoot().providers\n      ]\n    }\n  }\n}\n"],"names":["((/** @type {?} */ (cloneDeep))).default","cloneDeep","EventEmitter","Component","DomSanitizer","HostBinding","Input","Output","PopoverModule","NgModule","CommonModule"],"mappings":"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"}